<!DOCTYPE html>
<html>
  <head>
    <title>Slot Machine</title>
    <style>
      /*CSS styles here */
      .slot-machine {
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .column {
        display: flex;
		height: 12.5em;
        flex-direction: column;
        border: 1px solid black;
		overflow: hidden;
      }
      .column:first-child,
      .column:last-child {
        background-color: #ddd;
      }
	  
	  .column > div:nth-child(1),
	  .column > div:nth-child(3) {
		filter: sepia(100%) saturate(300%) brightness(70%) hue-rotate(180deg);
		}
	  
      .symbol {
		width: 2em;
		height: 2em;
        font-size: 3em;
        text-align: center;
		/* animation */
		transition: transform 1.0s cubic-bezier(.6,1.08,.83,1.16);
		transform: translateY(-600%);
      }
    </style>
  </head>
  <body>
    <button id="play-button">Play</button>
    <script>
      // add your JavaScript code here
      const slotSymbols = ['ðŸ’', 'ðŸ’Ž', 'ðŸŠ', 'ðŸ‡', 'ðŸ’', 'ðŸ†'];

      const getRandomSymbol = () => {
        return slotSymbols[Math.floor(Math.random() * slotSymbols.length)];
      }

	const symbolsList = [];

      const createColumn = () => {
        const column = document.createElement('div');
        column.classList.add('column');
        for (let i = 0; i < 10; i++) {
          const symbol = document.createElement('div');
		  symbolsList.push(symbol);
          symbol.innerHTML = getRandomSymbol();
          symbol.classList.add('symbol');
          column.appendChild(symbol);
        }
        return column;
      }

      const createSlotMachine = () => {
        const slotMachine = document.createElement('div');
        slotMachine.classList.add('slot-machine');
        for (let i = 0; i < 5; i++) {
          slotMachine.appendChild(createColumn());
        }
        return slotMachine;
      }

      document.body.appendChild(createSlotMachine());
      
      const playButton = document.getElementById('play-button');
	  
	  
	  //CLICK THE BUTTON
playButton.addEventListener('click', () => {
	symbolsList.length = [];
  const slotMachine = document.querySelector('.slot-machine');
  slotMachine.innerHTML = '';
  for (let i = 0; i < 5; i++) {
    slotMachine.appendChild(createColumn());
  }
  setTimeout(() => {
    const symbols = document.querySelectorAll('.symbol');
    symbols.forEach(symbol => symbol.style.transform = 'none');
  }, 001);

		const symbols = [];
		for (let i = 0; i < symbolsList.length; i += 5) {
			symbols.push(symbolsList.slice(i, i + 5));
		}
		drawLines(symbols);
		checkThreeOfAKind();
});
	
	const checkThreeOfAKind = () => {
  const secondSymbols = document.querySelectorAll('.column > .symbol:nth-child(2)');
  const counts = {};
  for (const symbol of secondSymbols) {
    if (counts[symbol.innerHTML]) {
      counts[symbol.innerHTML]++;
    } else {
      counts[symbol.innerHTML] = 1;
    }
  }
  const symbolCount = document.querySelector('.symbol-count');
  let text = '';
  for (const [symbol, count] of Object.entries(counts)) {
    text += `${symbol}: ${count} `;
  }
  symbolCount.innerHTML = text;
}


//DRAW LINES
const container = document.createElement('div');
container.setAttribute('id', 'container');
document.body.appendChild(container);
const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
svg.setAttribute('width', '100');
svg.setAttribute('height', '100');
container.appendChild(svg);


const drawLines = (symbols) => {
  const container = document.querySelector('#container');
  const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
  svg.setAttribute('width', '100');
  svg.setAttribute('height', '100');
  container.appendChild(svg);
  const firstSymbol = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
  firstSymbol.setAttribute('cx', '50');
  firstSymbol.setAttribute('cy', '50');
  firstSymbol.setAttribute('r', '40');
  svg.appendChild(firstSymbol);
  const point1 = svg.createSVGPoint();
  point1.x = 0;//firstSymbol.offsetLeft;
  point1.y = 0;//firstSymbol.offsetTop;
  const ctm1 = firstSymbol.getScreenCTM();
  const transformedPoint1 = point1.matrixTransform(ctm1.inverse());
  for (let i = 1; i < symbols.length; i++) {
    const column = symbols[i];
    for (let j = 0; j < 3; j++) {
      const symbol = column[j];
      if (symbol.textContent === firstSymbol.textContent) {
        const point2 = svg.createSVGPoint();
        point2.x = 0;//symbol.offsetLeft;
        point2.y = 0;//symbol.offsetTop;
        const ctm2 = symbol.getScreenCTM();
        const transformedPoint2 = point2.matrixTransform(ctm2.inverse());
        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        path.setAttribute('d', `M${transformedPoint1.x} ${transformedPoint1.y} L${transformedPoint2.x} ${transformedPoint2.y}`);
        svg.appendChild(path);
      }
    }
  }
};




      
    </script>
	<div class="scrollable">
  <div class="symbol-count"></div>
</div>
  </body>
</html>
